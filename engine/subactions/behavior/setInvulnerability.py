from engine.subaction import *
import engine.statusEffect

class setInvulnerability(SubAction):
    subact_group = 'Behavior'
    fields = [NodeMap('invuln_amt','int','setInvulnerability',0),
              ]
    
    def __init__(self,_amt=0):
        SubAction.__init__(self)
        self.invuln_amt = _amt
    
    def execute(self, _action, _actor):
        SubAction.execute(self, _action, _actor)
        apply_effect = engine.statusEffect.TemporaryHitFilter(_actor,engine.hurtbox.Intangibility(_actor),self.invuln_amt)
        apply_effect.activate()
    
    def getDisplayName(self):
        return "Set invulnerability time to "+str(self.invuln_amt)
    
    def getPropertiesPanel(self,_root):
        #TODO add this
        return subactionSelector.BasePropertiesFrame(_root,self)

    def getDataLine(self, _parent):
        return dataSelector.NumLine(_parent, _parent.interior, 'Set Invulnerability: ', self, 'invuln_amt',_int=True)